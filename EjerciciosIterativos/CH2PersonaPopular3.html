<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p id="resultado"></p>
</body>

<script>
    let arrayPersonas = ["juan", "pepe", "juan", "pepe", "santiago" , "santiago"]

    const buscarPersona = (arrayBuscar) => {
        let resultado = "";
        let parrafo = document.getElementById("resultado")
        parrafo.innerHTML += "Los nombres del array son: " + "<br/>" + arrayBuscar + "<br/><br/>"
        let contadorDelMayor1 = 0;
        let contadorDelMayor2 = 0;
        let contadorDelMayor3 = 0;
        let personaMasAparece1 = "";
        let personaMasAparece2 = "";
        let personaMasAparece3 = "";
        // recorrer el array
        for (let i = 0; i < arrayBuscar.length; i++) {
            // quedarnos con la persona que vamos a buscar y crear un contador
            let personaBuscar = arrayBuscar[i]
            let contadorPersona = 0;
            // recorrer el array con cada nombre para compararlo y ver cuantas veces aparece
            for (let j = 0; j < arrayBuscar.length; j++) {
                // si la persona a buscar es encontrada y no es undefined
                if (personaBuscar == arrayBuscar[j] && personaBuscar != undefined) {
                    // contarla
                    contadorPersona++
                    // borrar la persona encontrada
                    delete (arrayBuscar[j])
                }
            }
            // ordenacion de los contadores
            // en el 1 guardamos el mas grande, si es mas grande que el contador 1 , pasar el contador 1 al 2 y el 2 al 3
            if (personaBuscar != personaMasAparece1 && contadorPersona > contadorDelMayor1) {
                contadorDelMayor3 = contadorDelMayor2;
                contadorDelMayor2 = contadorDelMayor1;
                contadorDelMayor1 = contadorPersona;
                personaMasAparece3 = personaMasAparece2;
                personaMasAparece2 = personaMasAparece1;
                personaMasAparece1 = personaBuscar;
            // en el 2 guardamos si es mas que este mismo, pasando el 2 al 3
            } else if (personaBuscar != personaMasAparece2 && personaBuscar!=personaMasAparece1 && contadorPersona > contadorDelMayor2) {
                contadorDelMayor3 = contadorDelMayor2;
                contadorDelMayor2 = contadorPersona;
                personaMasAparece3 = personaMasAparece2;
                personaMasAparece2 = personaBuscar

            // en el 3 guardamos la persona si es mas grande que la tercera
            } else if (personaBuscar != personaMasAparece2 && personaBuscar!=personaMasAparece1 && personaBuscar != personaMasAparece3 && contadorPersona > contadorDelMayor3) {
                contadorDelMayor3 = contadorPersona;
                personaMasAparece3 = personaBuscar

            }

        }
        parrafo.innerHTML += "Las personas mas populares son: " + "<strong>" + personaMasAparece1 + " " + contadorDelMayor1 +", " + "</strong>" + "<strong>" + personaMasAparece2 + " " + contadorDelMayor2 + " y " + "</strong>" + "<strong>" + personaMasAparece3 + " " + contadorDelMayor3 + "</strong>"
    }
    buscarPersona(arrayPersonas)
</script>

</html>